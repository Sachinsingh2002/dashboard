"use strict";(self.webpackChunkoakestra_dashboard=self.webpackChunkoakestra_dashboard||[]).push([[986],{986:(J,p,r)=>{r.r(p),r.d(p,{LoginModule:()=>A});var d=r(8937),s=r(4006),g=r(6895),t=r(4535),v=r(529),P=r(9653),b=r(493),C=r(6366),u=r(4254),y=r(1324),Z=r(2340),m=r(4934),n=r(4650),T=r(4389),O=r(4865),f=r(4017),h=r(7775);function k(i,l){1&i&&(n.TgZ(0,"nb-form-field"),n._UZ(1,"input",15)(2,"nb-icon",16),n.qZA())}function M(i,l){1&i&&(n.TgZ(0,"div",14),n._uU(1," Please enter the same password again to confirm. "),n.qZA())}const N=[{path:"",component:(()=>{class i{constructor(o,e,a,c,U,w){this.router=o,this.userService=e,this.authService=a,this.notifyService=c,this.api=U,this.fb=w,this.sm_ip=Z.N.apiUrl,this.useOrganization=!1,this.showPassword=!0,this.form=w.group({organization_name:["",[s.kI.required]],username:["",[s.kI.required]],password:["",[s.kI.required]]}),this.form.get("organization_name").disable()}getInputType(){return this.showPassword?"text":"password"}toggleShowPassword(){this.showPassword=!this.showPassword}tabChanged(o){this.useOrganization=o,this.useOrganization?this.form.get("organization_name").enable():this.form.get("organization_name").disable()}submitLogin(){const o=Object.assign({},this.form.value);this.userService.login(o).subscribe({next:()=>{this.router.navigate(["/control"])},error:e=>this.notifyService.notify(m.k.error,e)})}forgotPassword(){const o=this.form.get("username");console.log("SEND MAIL"),o?.valid?this.api.resetPassword(o.value).subscribe(()=>{this.notifyService.notify(m.k.success,"An email with a reset password link was sent")}):this.notifyService.notify(m.k.error,"Please provide a valid username")}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(d.F0),n.Y36(T.K),n.Y36(O.e),n.Y36(f.g),n.Y36(h.s),n.Y36(s.qu))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-login"]],decls:22,vars:7,consts:[[1,"login-form"],["alt","Oakestra Logo","src","../../../../assets/img/color-full.png"],["accept-charset","UTF-8","role","form",3,"formGroup"],[1,"info"],["status","basic",3,"checkedChange"],["nbSuffix","","icon","info","pack","eva",3,"nbTooltip"],[4,"ngIf"],["type","text","fullWidth","","nbInput","","formControlName","username","placeholder","Username"],["nbSuffix","","icon","person-outline","pack","eva"],["placeholder","Password","fullWidth","","formControlName","password","nbInput","",3,"type"],["nbSuffix","","nbButton","","ghost","",3,"click"],["pack","eva",3,"icon"],[1,"pull-right","text-primary","link",3,"click"],[1,"centerButton"],["nbButton","","outline","","status","primary",3,"disabled","click"],["type","text","fullWidth","","nbInput","","formControlName","organization_name","placeholder","Organization"],["nbSuffix","","icon","people","pack","eva"]],template:function(o,e){1&o&&(n.TgZ(0,"nb-layout")(1,"nb-layout-column")(2,"nb-card",0),n._UZ(3,"img",1),n.TgZ(4,"form",2)(5,"div",3)(6,"nb-checkbox",4),n.NdJ("checkedChange",function(c){return e.tabChanged(c)}),n._uU(7,"Organization login"),n.qZA(),n._UZ(8,"nb-icon",5),n.qZA(),n.YNc(9,k,3,0,"nb-form-field",6),n.TgZ(10,"nb-form-field"),n._UZ(11,"input",7)(12,"nb-icon",8),n.qZA(),n.TgZ(13,"nb-form-field"),n._UZ(14,"input",9),n.TgZ(15,"button",10),n.NdJ("click",function(){return e.toggleShowPassword()}),n._UZ(16,"nb-icon",11),n.qZA()(),n.TgZ(17,"span",12),n.NdJ("click",function(){return e.forgotPassword()}),n._uU(18,"Forgot password?"),n.qZA()(),n.TgZ(19,"div",13)(20,"button",14),n.NdJ("click",function(){return e.submitLogin()}),n._uU(21," Sign in "),n.qZA()()()()()),2&o&&(n.xp6(4),n.Q6J("formGroup",e.form),n.xp6(4),n.s9C("nbTooltip",e.sm_ip),n.xp6(1),n.Q6J("ngIf",e.useOrganization),n.xp6(5),n.Q6J("type",e.getInputType()),n.xp6(2),n.Q6J("icon",e.showPassword?"eye-outline":"eye-off-2-outline"),n.uIk("aria-label",e.showPassword?"hide password":"show password"),n.xp6(4),n.Q6J("disabled",e.form.invalid))},dependencies:[g.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,t.Asz,t.DPz,t.Aqw,t.dP_,t.h8i,t.fMN,t.jBG,t.yyc,t.jNv,t.NTf],styles:[".login-form[_ngcontent-%COMP%]{width:80%;height:-moz-fit-content;height:fit-content;position:absolute;inset:0;margin:auto;padding:20px}nb-form-field[_ngcontent-%COMP%]{padding:10px 0}.connectingInfo[_ngcontent-%COMP%]{float:right;margin:8px}.signUp[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8px}.form-group[_ngcontent-%COMP%]{margin-top:8px}.form-control[_ngcontent-%COMP%]{margin-bottom:16px}.loginButton[_ngcontent-%COMP%]{display:flex;justify-content:center}.centerButton[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8px}.link[_ngcontent-%COMP%]{cursor:pointer;float:right}nb-card-body.example-items-col[_ngcontent-%COMP%]{align-items:stretch}.info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media only screen and (min-width: 801px){.login-form[_ngcontent-%COMP%]{width:60%}}@media only screen and (min-width: 1201px){.login-form[_ngcontent-%COMP%]{width:35%}}hr[_ngcontent-%COMP%]{border-top:1px solid #fff}"]}),i})(),pathMatch:"full"},{path:"resetPassword/:resetPasswordToken",component:(()=>{class i{constructor(o,e,a,c){this.router=o,this.activatedRoute=e,this.api=a,this.notifyService=c,this.form=new s.cw({newPass:new s.NI("",s.kI.required),confirmPass:new s.NI("",s.kI.required)}),this.resetPasswordToken=""}ngOnInit(){this.activatedRoute.params.subscribe(o=>{const e=o.resetPasswordToken;e?this.resetPasswordToken=e:this.router.navigate(["/"])})}get samePasswords(){var o,e;return(null===(o=this.form.get("newPass"))||void 0===o?void 0:o.value)===(null===(e=this.form.get("confirmPass"))||void 0===e?void 0:e.value)}submitNewPassword(){var o;const e=null===(o=this.form.get("newPass"))||void 0===o?void 0:o.value;this.api.saveResetPassword(this.resetPasswordToken,e).subscribe(()=>{this.notifyService.notify(m.k.success,"New password saved!"),this.router.navigate(["/"])},a=>console.log(a))}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(d.F0),n.Y36(d.gz),n.Y36(h.s),n.Y36(f.g))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-reset-password"]],decls:27,vars:3,consts:[[1,"resetForm"],["accept-charset","UTF-8",3,"formGroup"],[1,"form-group"],["for","newPassword",1,"cols-sm-2","control-label"],[1,"cols-sm-10"],[1,"input-group"],[1,"input-group-addon"],["aria-hidden","true",1,"fa","fa-lock","fa-lg"],["formControlName","newPass","id","newPassword","placeholder","New password","type","password",1,"form-control"],["for","confirmNewPassword",1,"cols-sm-2","control-label"],["formControlName","confirmPass","id","confirmNewPassword","placeholder","Confirm password","type","password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"saveButton"],["nbButton","","outline","","status","primary","type","button",3,"disabled","click"],[1,"alert","alert-danger"]],template:function(o,e){1&o&&(n.TgZ(0,"nb-layout")(1,"nb-layout-column",0)(2,"nb-card")(3,"nb-card-header"),n._uU(4," Change Password "),n.qZA(),n.TgZ(5,"nb-card-body")(6,"form",1)(7,"div",2)(8,"label",3),n._uU(9,"New Password"),n.qZA(),n.TgZ(10,"div",4)(11,"div",5)(12,"span",6),n._UZ(13,"i",7),n.qZA(),n._UZ(14,"input",8),n.qZA()()(),n.TgZ(15,"div",2)(16,"label",9),n._uU(17,"Confirm new password"),n.qZA(),n.TgZ(18,"div",4)(19,"div",5)(20,"span",6),n._UZ(21,"i",7),n.qZA(),n._UZ(22,"input",10),n.qZA(),n.YNc(23,M,2,0,"div",11),n.qZA()(),n.TgZ(24,"div",12)(25,"button",13),n.NdJ("click",function(){return e.submitNewPassword()}),n._uU(26," Save new password "),n.qZA()()()()()()()),2&o&&(n.xp6(6),n.Q6J("formGroup",e.form),n.xp6(17),n.Q6J("ngIf",e.form.get("confirmPass").touched&&!e.samePasswords),n.xp6(2),n.Q6J("disabled",!e.form.valid||!e.samePasswords))},dependencies:[g.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,t.Asz,t.yKW,t.ndF,t.DPz,t.Aqw,t.dP_],styles:[".resetForm[_ngcontent-%COMP%]{text-align:-webkit-center}.resetForm[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{margin-top:10vh;width:40%;text-align:initial}input[_ngcontent-%COMP%]{margin-top:5px}label[_ngcontent-%COMP%]{margin-top:15px}fieldset[_ngcontent-%COMP%]{margin:0;border:none}.saveButton[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:30px}@media only screen and (max-width: 801px){.resetForm[_ngcontent-%COMP%]{width:40%}}@media only screen and (min-width: 1201px){.resetForm[_ngcontent-%COMP%]{width:35%}}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[g.ez,d.Bz.forChild(N),s.u5,s.UX,v.JF,P.Aw.forFeature(u.gG,u.I6),b.sQ.forFeature([y.Uy]),t.zyh,t.T2N,t.j7H.forRoot(),t.j5J,t.BW0,t.P1,C.O,t.COg,t.nKr,t.KdK,t.V7y,t.rgH,t.MfT,t.SDF.forRoot({name:"dark"}),d.Bz]}),i})()}}]);