"use strict";(self.webpackChunkoakestra_dashboard=self.webpackChunkoakestra_dashboard||[]).push([[112],{5112:(K,b,o)=>{o.r(b),o.d(b,{LoginModule:()=>$});var g=o(6582),d=o(4006),n=o(3546),w=o(4859),_=o(7392),p=o(6895),v=o(266),f=o(9549),y=o(4144),Z=o(7274),I=o(3848),e=o(4650),l=(o(2687),o(3238));o(1281);let C=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({}),c})(),F=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[C,l.BQ,l.si,p.ez,C,l.BQ]}),c})();var J=o(4385),x=o(6709),E=o(2340),u=o(4934),Y=o(4389),G=o(4865),M=o(4017),P=o(7775);function j(c,a){1&c&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Organization"),e.qZA(),e._UZ(3,"input",13),e.TgZ(4,"mat-icon",8),e._uU(5,"people"),e.qZA()())}function V(c,a){1&c&&(e.TgZ(0,"div",14),e._uU(1," Please enter the same password again to confirm. "),e.qZA())}const X=[{path:"",component:(()=>{class c{constructor(t,i,s,r,m,h){this.router=t,this.userService=i,this.authService=s,this.notifyService=r,this.api=m,this.fb=h,this.sm_ip=E.N.apiUrl,this.useOrganization=!1,this.form=h.group({organization_name:["",[d.kI.required]],username:["",[d.kI.required]],password:["",[d.kI.required]]}),this.form.get("organization_name").disable()}tabChanged(t){this.useOrganization=t.checked,this.useOrganization?this.form.get("organization_name").enable():this.form.get("organization_name").disable()}submitLogin(){const t=Object.assign({},this.form.value);this.userService.login(t).subscribe({next:()=>{this.router.navigate(["/control"])},error:i=>this.notifyService.notify(u.k.error,i)})}forgotPassword(){const t=this.form.get("username");t?.valid?this.api.resetPassword(t.value).subscribe(()=>{this.notifyService.notify(u.k.success,"An email with a reset password link was sent")}):this.notifyService.notify(u.k.error,"Please provide a valid username")}}return c.\u0275fac=function(t){return new(t||c)(e.Y36(g.F0),e.Y36(Y.K),e.Y36(G.e),e.Y36(M.g),e.Y36(P.s),e.Y36(d.qu))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-login"]],decls:29,vars:4,consts:[["xmlns","http://www.w3.org/1999/html","xmlns","http://www.w3.org/1999/html",1,"login-form"],["alt","Oakestra Logo","mat-card-image","","src","../../../../assets/img/color-full.png"],["accept-charset","UTF-8","role","form",3,"formGroup"],[1,"info"],[3,"change"],[3,"matTooltip"],[4,"ngIf"],["matInput","","formControlName","username","placeholder","Username"],["matPrefix",""],["matInput","","type","password","formControlName","password","placeholder","Password",3,"keyup.enter"],[1,"pull-right","text-primary","link",3,"click"],[1,"centerButton"],["color","primary","mat-flat-button","",3,"disabled","click"],["matInput","","formControlName","organization_name","placeholder","Organization"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0),e._UZ(1,"img",1),e.TgZ(2,"mat-card-content")(3,"form",2)(4,"div",3)(5,"p")(6,"mat-checkbox",4),e.NdJ("change",function(r){return i.tabChanged(r)}),e.qZA(),e._uU(7,"Organization login"),e.qZA(),e.TgZ(8,"mat-icon",5),e._uU(9,"info"),e.qZA()(),e.YNc(10,j,6,0,"mat-form-field",6),e.TgZ(11,"mat-form-field")(12,"mat-label"),e._uU(13,"Username"),e.qZA(),e._UZ(14,"input",7),e.TgZ(15,"mat-icon",8),e._uU(16,"person"),e.qZA()(),e.TgZ(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Password"),e.qZA(),e.TgZ(20,"input",9),e.NdJ("keyup.enter",function(){return i.submitLogin()}),e.qZA(),e.TgZ(21,"mat-icon",8),e._uU(22,"password"),e.qZA()(),e.TgZ(23,"span",10),e.NdJ("click",function(){return i.forgotPassword()}),e._uU(24,"Forgot password?"),e.qZA()(),e._UZ(25,"hr"),e.TgZ(26,"div",11)(27,"button",12),e.NdJ("click",function(){return i.submitLogin()}),e._uU(28,"Sign in"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(5),e.s9C("matTooltip",i.sm_ip),e.xp6(2),e.Q6J("ngIf",i.useOrganization),e.xp6(17),e.Q6J("disabled",i.form.invalid))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,n.a8,n.dn,n.G2,w.lW,_.Hw,d.sg,d.u,p.O5,v.gM,f.KE,f.hX,f.qo,y.Nt,x.oG],styles:[".login-form[_ngcontent-%COMP%]{width:80%;height:-moz-fit-content;height:fit-content;position:absolute;inset:0;margin:auto}.connectingInfo[_ngcontent-%COMP%]{float:right;margin:8px}.signUp[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8px}.form-group[_ngcontent-%COMP%]{margin-top:8px}.form-control[_ngcontent-%COMP%]{margin-bottom:16px}.loginButton[_ngcontent-%COMP%]{display:flex;justify-content:center}.centerButton[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:8px}.link[_ngcontent-%COMP%]{cursor:pointer;float:right}.info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}@media only screen and (min-width: 801px){.login-form[_ngcontent-%COMP%]{width:60%}}@media only screen and (min-width: 1201px){.login-form[_ngcontent-%COMP%]{width:35%}}.mat-mdc-tab-group[_ngcontent-%COMP%]{display:contents;flex-direction:column;max-width:100%}.mat-mdc-tab-body-content[_ngcontent-%COMP%]{height:100%;overflow:hidden}.mat-mdc-tab-body.mat-mdc-tab-body-active[_ngcontent-%COMP%]{overflow:hidden!important}hr[_ngcontent-%COMP%]{border-top:1px solid #fff}"]}),c})(),pathMatch:"full"},{path:"resetPassword/:resetPasswordToken",component:(()=>{class c{constructor(t,i,s,r){this.router=t,this.activatedRoute=i,this.api=s,this.notifyService=r,this.form=new d.cw({newPass:new d.NI("",d.kI.required),confirmPass:new d.NI("",d.kI.required)}),this.resetPasswordToken=""}ngOnInit(){this.activatedRoute.params.subscribe(t=>{const i=t.resetPasswordToken;i?this.resetPasswordToken=i:this.router.navigate(["/"])})}get samePasswords(){var t,i;return(null===(t=this.form.get("newPass"))||void 0===t?void 0:t.value)===(null===(i=this.form.get("confirmPass"))||void 0===i?void 0:i.value)}submitNewPassword(){var t;const i=null===(t=this.form.get("newPass"))||void 0===t?void 0:t.value;this.api.saveResetPassword(this.resetPasswordToken,i).subscribe(()=>{this.notifyService.notify(u.k.success,"New password saved!"),this.router.navigate(["/"])},s=>console.log(s))}}return c.\u0275fac=function(t){return new(t||c)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(P.s),e.Y36(M.g))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-reset-password"]],decls:25,vars:3,consts:[[1,"resetForm"],["accept-charset","UTF-8",3,"formGroup"],[1,"form-group"],["for","newPassword",1,"cols-sm-2","control-label"],[1,"cols-sm-10"],[1,"input-group"],[1,"input-group-addon"],["aria-hidden","true",1,"fa","fa-lock","fa-lg"],["formControlName","newPass","id","newPassword","placeholder","New password","type","password",1,"form-control"],["for","confirmNewPassword",1,"cols-sm-2","control-label"],["formControlName","confirmPass","id","confirmNewPassword","placeholder","Confirm password","type","password",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"saveButton"],["mat-button","","mat-flat-button","","type","button",3,"disabled","click"],[1,"alert","alert-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title"),e._uU(2,"Change Password"),e.qZA(),e.TgZ(3,"mat-card-content")(4,"form",1)(5,"div",2)(6,"label",3),e._uU(7,"New Password"),e.qZA(),e.TgZ(8,"div",4)(9,"div",5)(10,"span",6),e._UZ(11,"i",7),e.qZA(),e._UZ(12,"input",8),e.qZA()()(),e.TgZ(13,"div",2)(14,"label",9),e._uU(15,"Confirm new password"),e.qZA(),e.TgZ(16,"div",4)(17,"div",5)(18,"span",6),e._UZ(19,"i",7),e.qZA(),e._UZ(20,"input",10),e.qZA(),e.YNc(21,V,2,0,"div",11),e.qZA()(),e.TgZ(22,"div",12)(23,"button",13),e.NdJ("click",function(){return i.submitNewPassword()}),e._uU(24," Save new password "),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(17),e.Q6J("ngIf",i.form.get("confirmPass").touched&&!i.samePasswords),e.xp6(2),e.Q6J("disabled",!i.form.valid||!i.samePasswords))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,n.a8,n.dn,n.n5,w.lW,d.sg,d.u,p.O5],styles:[".resetForm[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;width:25%;margin-left:-12.5%;margin-top:-40vh}input[_ngcontent-%COMP%]{margin-top:5px}label[_ngcontent-%COMP%]{margin-top:15px}fieldset[_ngcontent-%COMP%]{margin:0;border:none}.saveButton[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:30px}@media only screen and (max-width: 801px){.resetForm[_ngcontent-%COMP%]{width:40%}}@media only screen and (min-width: 1201px){.resetForm[_ngcontent-%COMP%]{width:35%}}"]}),c})()}];let $=(()=>{class c{}return c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[g.Bz.forChild(X),d.u5,n.QW,w.ot,_.Ps,d.UX,p.ez,v.AV,f.lN,y.c,Z.Is,I.Nh,F,J.LD,x.p9,g.Bz]}),c})()}}]);